<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TDS Â∞àÊ•≠ËªäÈ´îÁæéÂÆπÈ†êÁ¥ÑÁ≥ªÁµ± | TDS Booking System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script>
        tailwind.config = { 
            theme: { 
                extend: { 
                    colors: { brand: '#ffffff' },
                    fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] }
                } 
            } 
        }
    </script>
    <style>
        body { background-color: #121212; color: white; font-size: 18px; /* Âü∫Á§éÂ≠óÈ´îÂä†Â§ß */ }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        :root { color-scheme: dark; }
        input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(1); opacity: 0.8; cursor: pointer; transform: scale(1.2); }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;

        const Logo = () => (
            <div className="flex justify-center mb-8">
                <div className="w-36 h-36 rounded-full border-2 border-white/30 shadow-[0_0_25px_rgba(255,255,255,0.15)] flex items-center justify-center bg-black overflow-hidden">
                     <img src="TDS Logo.jpg" alt="TDS" className="w-full h-full object-cover" onError={(e) => {e.target.style.display='none'; e.target.parentElement.innerText='TDS Logo'}} />
                </div>
            </div>
        );

        const translations = {
            zh: { subtitle: 'Â∞àÊ•≠ËªäÈ´îÁæéÂÆπ„ÉªÈççËÜúË´ÆË©¢', step1: 'ÊúçÂãôÈ†ÖÁõÆ', step2: 'ËªäÂûãÊôÇÈñì', step3: 'Á¢∫Ë™çÈ†êÁ¥Ñ', selectService: 'ÈÅ∏ÊìáÊúçÂãôÈ†ÖÁõÆ (ÂèØË§áÈÅ∏)', addons: 'ÈôÑÂä†ÈÅ∏È†Ö Add-ons', nextToTime: '‰∏ã‰∏ÄÊ≠•ÔºöÈÅ∏ÊìáËªäÂûãËàáÊôÇÈñì ‚Üí', carTypeLabel: 'ÊÇ®ÁöÑÊÑõËªäÁ®ÆÈ°û', dateLabel: 'È†êÁ¥ÑÊó•Êúü', timeLabel: 'È†êÁ¥ÑÊôÇÊÆµ (1Â∞èÊôÇ/ÂñÆ‰Ωç)', selectTimePlaceholder: 'Ë´ãÈÅ∏ÊìáÊôÇÊÆµ', back: 'Âõû‰∏ä‰∏ÄÊ≠•', nextToConfirm: '‰∏ã‰∏ÄÊ≠•ÔºöÁ¢∫Ë™çË≥áË®ä', confirmTitle: 'È†êÁ¥ÑÂñÆÁ¢∫Ë™ç', carTypeResult: 'ËªäÂûã', timeResult: 'È†êÁ¥ÑÊôÇÈñì', serviceResult: 'ÊúçÂãôÈ†ÖÁõÆ', nameLabel: 'ÊÇ®ÁöÑÁ®±Âëº (ÈÅ∏Â°´)', namePlaceholder: '‰æãÂ¶ÇÔºöÈô≥ÂÖàÁîü / Mr. Chen', tip: 'Êåâ‰∏ãÊåâÈàïÂæåÂ∞áÈñãÂïü LINEÔºåÁ≥ªÁµ±Â∑≤Âπ´ÊÇ®Ëº∏ÂÖ•Â•Ω‰∏≠Ëã±Â∞çÁÖßÂÖßÂÆπÔºåË´ãÁõ¥Êé•Êåâ‰∏ã„ÄåÂÇ≥ÈÄÅ„ÄçÂç≥ÂèØ„ÄÇ', btnModify: '‰øÆÊîπ', btnSubmit: 'ËÅØÁπ´ LINE È†êÁ¥Ñ' },
            en: { subtitle: 'Professional Auto Detailing & Coating', step1: 'Services', step2: 'Car & Time', step3: 'Confirm', selectService: 'Select Services (Multiple)', addons: 'Add-ons', nextToTime: 'Next: Car & Time ‚Üí', carTypeLabel: 'Vehicle Type', dateLabel: 'Preferred Date', timeLabel: 'Preferred Time (1hr slots)', selectTimePlaceholder: 'Select a time slot', back: 'Back', nextToConfirm: 'Next: Confirmation', confirmTitle: 'Booking Confirmation', carTypeResult: 'Vehicle', timeResult: 'Time', serviceResult: 'Services', nameLabel: 'Your Name (Optional)', namePlaceholder: 'e.g., Mr. Chen', tip: 'Pressing the button will open LINE with a bilingual message pre-filled. Just press "Send".', btnModify: 'Edit', btnSubmit: 'Book via LINE' }
        };

        function TDSBookingSystem() {
            const [lang, setLang] = useState('zh');
            const [step, setStep] = useState(1);
            const [formData, setFormData] = useState({ serviceType: [], addons: [], carType: '', date: '', time: '', name: '' });

            const t = translations[lang];

            const serviceGroups = [
                { titleZh: 'Âü∫Á§éÊ∏ÖÊΩîËàáË≠∑ÁêÜ', titleEn: 'Basic Cleaning & Care', items: [ { id: 'wash', nameZh: 'Á≤æÁ∑ªÊ¥óËªä', nameEn: 'Exquisite Wash', descZh: 'Â§ñËßÄËàáÂÖßË£ùÊ∏ÖÊΩî', descEn: 'Exterior & Interior' }, { id: 'leather', nameZh: 'ÁöÆÈù©‰øùÈ§ä', nameEn: 'Leather Care', descZh: 'ÂÖßË£ùÊªãÊΩ§Ëàá‰øÆÂæ©', descEn: 'Interior Conditioning' }, { id: 'deep_clean', nameZh: 'Ê∑±Â∫¶Ê∏ÖÊΩî', nameEn: 'Deep Cleaning', descZh: 'Èô§Áï∞Âë≥„ÄÅËí∏Ê∞£ÊÆ∫Ëèå', descEn: 'Odor Removal & Steam' } ] },
                { titleZh: 'ÊºÜÈù¢ÁæéÂÆπÂ∑•Á®ã', titleEn: 'Paint Correction', items: [ { id: 'one_step', nameZh: 'Â∞èÁæéÂÆπ (ÂñÆÂäëÊããÂÖâ)', nameEn: 'One Step Polish', descZh: 'ÊèêÂçá‰∫ÆÂ∫¶/ÂéªÈô§ËºïÂæÆÁ¥∞Á¥ã', descEn: 'Gloss Enhancement' }, { id: 'multi_correction', nameZh: 'Â§ßÁæéÂÆπ (Â§öÂ±§Ê¨°‰øÆÂæ©)', nameEn: 'Multi-Correction', descZh: 'Ê∑±Â±§Á¥ãË∑Ø‰øÆÂæ©/Èè°Èù¢ËôïÁêÜ', descEn: 'Deep Scratch Removal' } ] },
                { titleZh: 'Â∞àÊ•≠ÈççËÜú‰∏≠ÂøÉ', titleEn: 'Professional Coating', items: [ { id: 'coating_7y', nameZh: 'Èï∑ÊúüÈççËÜú (7Âπ¥)', nameEn: 'Long Term Coating (7 Years)', descZh: 'Ê•µËá¥Èò≤Ë≠∑', descEn: 'Ultimate Protection' }, { id: 'coating_5y', nameZh: 'Èï∑ÊúüÈççËÜú (5Âπ¥)', nameEn: 'Long Term Coating (5 Years)', descZh: 'È´òËÄê‰πÖÊÄß', descEn: 'High Durability' }, { id: 'coating_2y', nameZh: 'Èï∑ÊúüÈççËÜú (2Âπ¥)', nameEn: 'Long Term Coating (2 Years)', descZh: 'ÈÄ≤ÈöéÈò≤Ë≠∑', descEn: 'Advanced Protection' }, { id: 'coating_1y', nameZh: 'Èï∑ÊúüÈççËÜú (1Âπ¥)', nameEn: 'Long Term Coating (1 Year)', descZh: 'Âü∫Á§éÈï∑Êïà', descEn: 'Standard Long-Term' }, { id: 'coating_short', nameZh: 'Áü≠ÊúüÈççËÜú (ÂçäÂπ¥)', nameEn: 'Short Term Coating (6 Months)', descZh: 'Â≠£ÁØÄÊÄßË≠∑ÁêÜ', descEn: 'Seasonal Care' } ] }
            ];

            const addons = [ { id: 'ac_clean', nameZh: 'ÂÜ∑Ê∞£ÁÆ°Ë∑ØÊ∏ÖÊΩî', nameEn: 'A/C Cleaning' }, { id: 'wiper', nameZh: 'Èõ®Âà∑Êõ¥Êèõ', nameEn: 'Wiper Replacement' }, { id: 'coating_maintain', nameZh: 'ÈççËÜúÂÆöÊúüÁ∂≠Ë≠∑', nameEn: 'Coating Maintenance' } ];
            const carTypes = [ { id: 'sedan', nameZh: 'Â∞èÂûãÊàøËªä (Sedan)', nameEn: 'Sedan' }, { id: 'suv', nameZh: '‰ºëÊóÖËªä (SUV)', nameEn: 'SUV' }, { id: 'coupe', nameZh: 'Ë∑ëËªä (Coupe)', nameEn: 'Coupe' }, { id: 'mpv', nameZh: 'Â§ßÂûã‰ºëÊóÖ/MPV', nameEn: 'Large SUV / MPV' }, { id: 'moto', nameZh: 'Ê©üËªä (Motorcycle)', nameEn: 'Motorcycle' } ];

            const generateTimeSlots = () => { const slots = []; for (let i = 10; i <= 20; i++) { slots.push(`${i}:00`); } return slots; };
            const timeSlots = generateTimeSlots();

            const toggleSelection = (category, id) => { setFormData(prev => { const list = prev[category]; if (list.includes(id)) { return { ...prev, [category]: list.filter(i => i !== id) }; } return { ...prev, [category]: [...list, id] }; }); };
            
            const handleNext = () => { window.scrollTo(0,0); setStep(prev => prev + 1); };
            const handleBack = () => { window.scrollTo(0,0); setStep(prev => prev - 1); };

            const handleLineSubmit = () => {
                const allServices = serviceGroups.flatMap(g => g.items);
                const selectedCar = carTypes.find(c => c.id === formData.carType);
                const carStr = selectedCar ? `${selectedCar.nameZh} / ${selectedCar.nameEn}` : 'Êú™ÈÅ∏Êìá';
                const serviceStr = formData.serviceType.map(sid => { const s = allServices.find(item => item.id === sid); return s ? `${s.nameZh} (${s.nameEn})` : ''; }).join(', ');
                const addonStr = formData.addons.length > 0 ? formData.addons.map(aid => { const a = addons.find(item => item.id === aid); return a ? `${a.nameZh} (${a.nameEn})` : ''; }).join(', ') : 'ÁÑ° / None';

                const message = `
„ÄêTDS È†êÁ¥ÑË´ÆË©¢ | Booking Inquiry„Äë
-----------------------
üë§ È°ßÂÆ¢ (Name): ${formData.name || 'Êú™Â°´ÂØ´ / Not provided'}
üöó ËªäÂûã (Vehicle): ${carStr}
üìÖ Êó•Êúü (Date): ${formData.date}
‚è∞ ÊôÇÈñì (Time): ${formData.time}

üõ† ÊúçÂãôÈ†ÖÁõÆ (Services):
${serviceStr}

‚ûï ÈôÑÂä†ÊúçÂãô (Add-ons):
${addonStr}
-----------------------
Ë´ãÂïèÊ≠§ÊôÇÊÆµÊòØÂê¶ÂèØ‰ª•È†êÁ¥ÑÔºü
Is this slot available?`.trim();

                navigator.clipboard.writeText(message).catch(() => {});
                const encodedMessage = encodeURIComponent(message);
                const lineUrl = `https://line.me/R/oaMessage/@794xqwdg/?${encodedMessage}`;
                window.location.href = lineUrl;
            };

            const getGroupTitle = (group) => lang === 'zh' ? group.titleZh : group.titleEn;
            const getItemName = (item) => lang === 'zh' ? item.nameZh : item.nameEn;
            const getItemDesc = (item) => lang === 'zh' ? item.descZh : item.descEn;
            const getAddonName = (item) => lang === 'zh' ? item.nameZh : item.nameEn;
            const getCarName = (item) => lang === 'zh' ? item.nameZh : item.nameEn;
            const allServicesFlat = serviceGroups.flatMap(g => g.items);
            const getSelectedServiceName = (sid) => { const s = allServicesFlat.find(i => i.id === sid); return s ? getItemName(s) : ''; }

            return (
                <div className="min-h-screen bg-[#121212] text-white font-sans selection:bg-white selection:text-black pb-12">
                    <div className="max-w-3xl mx-auto px-6 py-10">
                        {/* Ë™ûË®ÄÂàáÊèõ */}
                        <div className="flex justify-end mb-6">
                            <div className="bg-[#1e1e1e] border border-gray-600 rounded-full p-1.5 flex shadow-lg">
                                <button onClick={() => setLang('zh')} className={`px-5 py-2 rounded-full text-sm font-bold transition-all ${lang === 'zh' ? 'bg-white text-black' : 'text-gray-400 hover:text-white'}`}>‰∏≠Êñá</button>
                                <button onClick={() => setLang('en')} className={`px-5 py-2 rounded-full text-sm font-bold transition-all ${lang === 'en' ? 'bg-white text-black' : 'text-gray-400 hover:text-white'}`}>EN</button>
                            </div>
                        </div>

                        <Logo />

                        {/* Ê®ôÈ°åÂçÄ */}
                        <div className="text-center mb-12">
                            <h1 className="text-4xl md:text-5xl font-extrabold tracking-wider mb-3 text-white">TDS</h1>
                            <p className="text-gray-300 text-base md:text-lg tracking-[0.2em] uppercase font-medium">{t.subtitle}</p>
                        </div>

                        {/* Ê≠•È©üÊåáÁ§∫Âô® */}
                        <div className="flex justify-between mb-12 relative px-4">
                            <div className="absolute top-1/2 left-4 right-4 h-1 bg-gray-700 -z-10 rounded-full"></div>
                            {[1, 2, 3].map((s) => (
                                <div key={s} className={`w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold transition-all duration-300 border-4 ${step >= s ? 'bg-white text-black border-white scale-110 shadow-[0_0_15px_rgba(255,255,255,0.4)]' : 'bg-[#121212] text-gray-500 border-gray-600'}`}>
                                    {s}
                                </div>
                            ))}
                        </div>

                        {/* ÂÖßÂÆπÂçÄÂ°ä */}
                        {step === 1 && (
                            <div className="space-y-10 fade-in">
                                <h2 className="text-2xl font-bold border-l-8 border-white pl-5 text-white">{t.selectService}</h2>
                                
                                {serviceGroups.map((group, index) => (
                                    <div key={index} className="space-y-5">
                                        <h3 className="text-xl font-bold text-gray-200 flex items-center gap-3">
                                            <span className="w-2 h-2 bg-gray-400 rounded-full"></span>
                                            {getGroupTitle(group)}
                                        </h3>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            {group.items.map((service) => (
                                                <div key={service.id} onClick={() => toggleSelection('serviceType', service.id)} 
                                                     className={`p-6 rounded-2xl border-2 cursor-pointer transition-all duration-200 flex flex-col justify-center gap-2 group relative overflow-hidden
                                                     ${formData.serviceType.includes(service.id) 
                                                        ? 'border-white bg-white/10 shadow-[0_0_15px_rgba(255,255,255,0.15)]' 
                                                        : 'border-gray-700 hover:border-gray-500 bg-[#1a1a1a]'}`}>
                                                    <h4 className="font-bold text-white text-xl">{getItemName(service)}</h4>
                                                    <p className="text-sm text-gray-400 leading-relaxed">{getItemDesc(service)}</p>
                                                    {formData.serviceType.includes(service.id) && <div className="absolute top-4 right-4 text-white text-xl">‚úì</div>}
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                ))}

                                <div className="mt-10 pt-8 border-t border-gray-800">
                                    <h3 className="text-base text-gray-300 font-bold mb-5 uppercase tracking-wider flex items-center gap-2">
                                        <span className="w-2 h-2 bg-white rounded-full inline-block"></span>{t.addons}
                                    </h3>
                                    <div className="flex flex-wrap gap-4">
                                        {addons.map((addon) => (
                                            <button key={addon.id} onClick={() => toggleSelection('addons', addon.id)} 
                                                className={`px-6 py-4 rounded-xl text-base font-medium border-2 transition-all 
                                                ${formData.addons.includes(addon.id) 
                                                    ? 'bg-white text-black border-white shadow-[0_0_15px_rgba(255,255,255,0.3)]' 
                                                    : 'bg-transparent text-gray-300 border-gray-600 hover:border-gray-400'}`}>
                                                + {getAddonName(addon)}
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                <button onClick={handleNext} disabled={formData.serviceType.length === 0} 
                                    className="w-full mt-8 bg-white text-black py-5 rounded-2xl font-bold text-xl hover:bg-gray-200 transition-colors disabled:opacity-40 disabled:cursor-not-allowed shadow-lg active:scale-95 transform duration-100">
                                    {t.nextToTime}
                                </button>
                            </div>
                        )}

                        {step === 2 && (
                            <div className="space-y-10 fade-in">
                                <h2 className="text-2xl font-bold border-l-8 border-white pl-5 text-white">{t.step2}</h2>
                                
                                <div className="space-y-5">
                                    <label className="block text-gray-300 text-lg font-bold">{t.carTypeLabel}</label>
                                    <div className="grid grid-cols-2 gap-4">
                                        {carTypes.map((type) => (
                                            <button key={type.id} onClick={() => setFormData({...formData, carType: type.id})} 
                                                className={`p-5 text-base md:text-lg font-medium rounded-xl border-2 text-left transition-all 
                                                ${formData.carType === type.id 
                                                    ? 'border-white bg-white/10 text-white shadow-[0_0_15px_rgba(255,255,255,0.1)]' 
                                                    : 'border-gray-600 text-gray-300 hover:border-gray-400 bg-[#1e1e1e]'}`}>
                                                {getCarName(type)}
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    <div>
                                        <label className="block text-gray-300 text-lg font-bold mb-4">{t.dateLabel}</label>
                                        <input type="date" 
                                            className="w-full bg-[#1e1e1e] border-2 border-gray-600 rounded-xl p-5 text-xl text-white focus:border-white outline-none cursor-pointer appearance-none" 
                                            onChange={(e) => setFormData({...formData, date: e.target.value})} 
                                            onClick={(e) => e.target.showPicker && e.target.showPicker()} />
                                    </div>
                                    <div>
                                        <label className="block text-gray-300 text-lg font-bold mb-4">{t.timeLabel}</label>
                                        <select 
                                            className="w-full bg-[#1e1e1e] border-2 border-gray-600 rounded-xl p-5 text-xl text-white focus:border-white outline-none appearance-none cursor-pointer" 
                                            onChange={(e) => setFormData({...formData, time: e.target.value})} 
                                            value={formData.time}>
                                            <option value="">{t.selectTimePlaceholder}</option>
                                            {timeSlots.map(time => (<option key={time} value={time}>{time}</option>))}
                                        </select>
                                    </div>
                                </div>

                                <div className="pt-8 flex gap-5">
                                    <button onClick={handleBack} className="w-1/3 py-5 rounded-2xl border-2 border-gray-600 text-gray-300 hover:border-gray-400 font-bold text-lg">{t.back}</button>
                                    <button onClick={handleNext} disabled={!formData.carType || !formData.date || !formData.time} 
                                        className="w-2/3 bg-white text-black py-5 rounded-2xl font-bold text-xl hover:bg-gray-200 disabled:opacity-40 shadow-lg active:scale-95 transform duration-100">
                                        {t.nextToConfirm}
                                    </button>
                                </div>
                            </div>
                        )}

                        {step === 3 && (
                            <div className="space-y-8 fade-in">
                                <h2 className="text-2xl font-bold border-l-8 border-white pl-5 text-white">{t.confirmTitle}</h2>
                                
                                <div className="bg-[#1e1e1e] p-8 rounded-3xl border-2 border-gray-700 space-y-6">
                                    <div className="flex justify-between items-center border-b border-gray-700 pb-5">
                                        <span className="text-gray-400 text-lg">{t.carTypeResult}</span>
                                        <span className="font-bold text-2xl text-white">{carTypes.find(c => c.id === formData.carType) ? getCarName(carTypes.find(c => c.id === formData.carType)) : ''}</span>
                                    </div>
                                    <div className="flex justify-between items-center border-b border-gray-700 pb-5">
                                        <span className="text-gray-400 text-lg">{t.timeResult}</span>
                                        <span className="font-bold text-xl text-white">{formData.date} <span className="text-yellow-400 mx-2">|</span> {formData.time}</span>
                                    </div>
                                    <div>
                                        <span className="text-gray-400 block mb-4 text-lg">{t.serviceResult}</span>
                                        <div className="flex flex-wrap gap-3">
                                            {formData.serviceType.map(sid => (
                                                <span key={sid} className="bg-white text-black px-4 py-2 rounded-xl font-bold text-base shadow-md">
                                                    {getSelectedServiceName(sid)}
                                                </span>
                                            ))}
                                            {formData.addons.map(aid => { 
                                                const a = addons.find(item => item.id === aid); 
                                                return a ? <span key={aid} className="border border-white/50 px-4 py-2 rounded-xl text-base text-gray-200">+ {getAddonName(a)}</span> : null; 
                                            })}
                                        </div>
                                    </div>
                                    <div className="pt-4">
                                        <label className="block text-gray-300 text-lg font-bold mb-3">{t.nameLabel}</label>
                                        <input type="text" placeholder={t.namePlaceholder} 
                                            className="w-full bg-black border-2 border-gray-600 rounded-xl p-4 text-lg text-white focus:border-white outline-none placeholder-gray-600" 
                                            onChange={(e) => setFormData({...formData, name: e.target.value})} />
                                    </div>
                                </div>

                                <div className="bg-green-900/30 border border-green-700/50 p-6 rounded-2xl text-base text-green-300 flex gap-4 items-start">
                                    <div className="mt-0.5 text-2xl">üí°</div>
                                    <p className="leading-relaxed">{t.tip}</p>
                                </div>

                                <div className="flex gap-5 pt-4">
                                    <button onClick={handleBack} className="w-1/3 py-5 rounded-2xl border-2 border-gray-600 text-gray-300 hover:border-gray-400 font-bold text-lg">{t.btnModify}</button>
                                    <button onClick={handleLineSubmit} className="w-2/3 bg-[#00B900] text-white py-5 rounded-2xl font-bold text-xl hover:bg-[#009900] transition-colors shadow-[0_0_25px_rgba(0,185,0,0.4)] flex justify-center items-center gap-3 active:scale-95 transform duration-100">
                                        <span>LINE</span> {t.btnSubmit}
                                    </button>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<TDSBookingSystem />);
    </script>
</body>
</html>